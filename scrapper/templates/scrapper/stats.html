{% extends 'scrapper/base_template.html' %}

{% block title %}Data STATS{% endblock %}


{% block content %}

<div class="card card-body bg-dark text-white">
    <div class="card-header text-center">
        <h3> Total Stored Products Stats </h3>
    </div>
    
	<canvas class="bg-light" id="myChart" width="400" height="150"></canvas>
	<br>

    <div class="card-header text-center">
        <h3> Products Details Stats </h3>
    </div>

    <div class="row">
    	<div class="col-sm-2"></div>
	    <div class="col-sm-8 bg-light" align="center">
	    	<canvas id="myChart2" width="150" height="150"></canvas>
	    </div>
    </div>
</div>




{% endblock %}


{% block internalJavaScript %}

<script type="text/javascript">
	
	var labels = []
	var labels_data = []
	var detail_label = []
	var detail_data = []

	$.ajax({
		method: 'GET',
		url: '',
		success: function(data) {
			console.log(data)
			labels = data.labels
			labels_data = data.labels_data
			detail_label = data.detail_label
			detail_data = data.detail_data
			setCharts(labels,labels_data)
			detailChart(detail_label,detail_data)
		},
		error: function(error_data){
			console.log(error_data)
		},
	})

	function setCharts(labels,labels_data){
		var ctx = document.getElementById('myChart').getContext('2d');
		var myChart = new Chart(ctx, {
		    type: 'bar',
		    data: {
		        labels: labels,
		        datasets: [{
		            label: 'Stored Products Stats',
		            data: labels_data,
		            backgroundColor: [
		                'rgba(255, 99, 132, 0.2)',
		                'rgba(54, 162, 235, 0.2)',
		                'rgba(255, 206, 86, 0.2)',
		                'rgba(75, 192, 192, 0.2)',
		                'rgba(153, 102, 255, 0.2)',
		                'rgba(255, 159, 64, 0.2)'
		            ],
		            borderColor: [
		                'rgba(255, 99, 132, 1)',
		                'rgba(54, 162, 235, 1)',
		                'rgba(255, 206, 86, 1)',
		                'rgba(75, 192, 192, 1)',
		                'rgba(153, 102, 255, 1)',
		                'rgba(255, 159, 64, 1)'
		            ],
		            borderWidth: 1
		        }]
		    },
		    options: {
		        scales: {
		            y: {
		                beginAtZero: true
		            }
		        }
		    }
		});
	}

	function detailChart(detail_label,detail_data){
		var ctx2 = document.getElementById('myChart2').getContext('2d');
		var myChart = new Chart(ctx2, {
		    type: 'polarArea',
		    data: {
		        labels: detail_label,
		        datasets: [{
		            data: detail_data,
		            backgroundColor: [
		                'rgba(255, 99, 132, 0.2)',
		                'rgba(54, 162, 235, 0.2)',
		                'rgba(255, 206, 86, 0.2)',
		                'rgba(75, 192, 192, 0.2)',
		            ],
		            borderColor: [
		                'rgba(255, 99, 132, 1)',
		                'rgba(54, 162, 235, 1)',
		                'rgba(255, 206, 86, 1)',
		                'rgba(75, 192, 192, 1)',
		            ],
		            borderWidth: 1
		        }]
		    },
		    options: {
		        scales: {
		            y: {
		                beginAtZero: true
		            }
		        }
		    }
		});
	}

</script>

{% endblock %}